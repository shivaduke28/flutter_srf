# srf仕様

このdocではsrfの仕様を定義します。
仕様は検討段階であり開発を通して仕様を更新していくことを想定しています。

## srfとは

`.srf`は音源ファイルのメタデータを管理するための新しい拡張子です。
既存の音源データはバイナリの中にメタデータを埋め込む方法が一般的ですが、
`.srf`はメタデータをJSON形式で分離して管理することを目的としています。

例えば、`foo.mp3`という音源ファイルがある場合、それを含む`foo.srf`というディレクトリを作ります。
このディレクトリを"srf(Sound Resource File)コンテナ"と呼びます。
srfコンテナの中には`foo.mp3`と、メタデータの`meta.json`ファイルが配置されます。

```
root
|-- foo.srf
  |-- foo.mp3
  |-- meta.json
|-- bar.srf
  |-- bar.mp3
  |-- bar.wav
  |-- meta.json
```

このような構成にすることで、音源データとメタデータを分離して管理することができます。
例えば、wavファイルを保持したいがポータブル端末にはmp3ファイルをエクスポートしたくなることがあります。
このような場合に、srfコンテナの中に両方を入れておき、どの形式でエクスポートするかを選べる、という利点があります。

## メタデータ
`srf`コンテナの中にある`meta.json`ファイルは、音源ファイルのメタデータをJSON形式で記述します。
以下はその例です。
```json
{
  "artist" : "foo feat. bar",
  "duration" : 309.60326530612247,
  "trackNumber" : 3,
  "title" : "my song",
  "artists" : [
    "foo",
    "bar"
  ]
}
```

## アルバム

アルバムは`.srfa`という拡張子を持つディレクトリで管理されます。
Sound Resource File Albumの略です。
srfaコンテナは以下のようなディレクトリ構造を持ちます
```
my_album.srfa
  |- meta.json
  |- cover.jpg
  |- foo.srf
  |- bar.srf
```

